/*! builded Wed Sep 12 2018 18:20:16 */

function createCookie(a,b,c){var d,e;c?(d=new Date,d.setTime(d.getTime()+864e5*c),e="; expires="+d.toGMTString()):e="";var f,g=document.domain.split(".");1==g.length?document.cookie=a+"="+b+e+"; path=/":(f=function(a){var b=a.split(":")[0].split(".");return b.shift(),b.unshift(""),b.join(".")}(document.domain),document.cookie=a+"="+b+e+"; path=/;domain="+f)}function readCookie(a){for(var b,c=a+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(b=d[e];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(c))return b.substring(c.length,b.length)}return null}function eraseCookie(a){createCookie(a,"",-1)}function Notify(a,b,c,d,e,f,g){toastr&&(toastr.options.positionClass="toast-"+b,toastr.options.extendedTimeOut=0,toastr.options.timeOut=c,toastr.options.closeButton=f,toastr.options.iconClass=e+" toast-"+d,toastr.options.tapToDismiss=!g,toastr.custom(a))}function getNotifyPos(){return isPC()?"bottom-right":"top-right"}function NotifyWarning(a){Notify(a,getNotifyPos(),"3000","warning","fa-exclamation-triangle",!0)}function NotifySuccess(a){Notify(a,getNotifyPos(),"3000","success","fa-edit",!0)}function NotifyError(a){return Notify(a,getNotifyPos(),"3000","danger","fa-times",!0)}function isPlainObject(a){return"[object Object]"===_toString.call(a)}function NotifyErrorInfo(a){return window.NotifyError?NotifyError(a):$.toast?$.toast(a):(alert(a),void console.trace("\u5f02\u5e38\u5806\u6808"))}function isVisitable(a){var b=a.offset().top;return b>=$(window).scrollTop()&&b<$(window).scrollTop()+$(window).height()}function hasScroll(a){var b=document.getElementById(a);return b.scrollHeight>b.clientHeight||b.offsetHeight>b.clientHeight}function scrollbarWidth(){if(void 0!==cachedScrollbarWidth)return cachedScrollbarWidth;var a,b,c=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),d=c.children()[0];return $("body").append(c),a=d.offsetWidth,c.css("overflow","scroll"),b=d.offsetWidth,a===b&&(b=c[0].clientWidth),c.remove(),cachedScrollbarWidth=a-b}function getStyle(a,b){if(a.style[b])return a.style[b];if(a.currentStyle)return a.currentStyle[b];if(document.defaultView&&document.defaultView.getComputedStyle){b=b.replace(/([A-Z])/g,"-$1"),b=b.toLowerCase();var c=document.defaultView.getComputedStyle(a,"");return c&&c.getPropertyValue(b)}return null}function abortXHR(a){a&&a.readyState<4&&(a.onreadystatechange=$.noop,a.abort())}function randomUrl(a){return a=a.indexOf("?")>=0?a+"&r="+Math.random():a+"?r="+Math.random()}function handleNetworkError(){$("#noNetwork").css("display","block");var a=window.setInterval(function(){$.ajax({url:"https://img.alicdn.com/tps/i3/T1OjaVFl4dXXa.JOZB-114-114.png",timeout:2e3,async:!1,cache:!1}).done(function(b,c,d){console.log("readyState==="+d.readyState),console.log("status==="+d.status),window.clearInterval(a),$("#noNetwork").css("display","none")}).always(function(a,b){null})},2e3)}function isInFrame(){return window.self!=window.top}function _wrpClearSessionCookies(){RemoveGlobelData("teldTTT"),eraseCookie("TELDSID"),eraseCookie("telda"),eraseCookie("teldb"),eraseCookie("teldc"),eraseCookie("teldd"),eraseCookie("teldk"),eraseCookie("teldz"),eraseCookie("TELDSID")}function _goToLoginPage(){_wrpClearSessionCookies();var a;if(isInFrame())return _clearMenuCookie(),void window.top.postMessage("gotoLogin","*");a="?redirect_uri="+encodeURIComponent(window.location.href),window.location.href=window.UserCenterUrl+a,_clearMenuCookie()}function _clearMenuCookie(){eraseCookie(getMenuCookieKey()),eraseCookie(getMobileMenuCookieKey()),eraseCookie(getMenuGroupCookieKey())}function isInApp(){return-1!=window.navigator.userAgent.indexOf("TeldIosWebView")||-1!=window.navigator.userAgent.indexOf("TeldAndroidWebView")}function AndroidTokenTimeout(){window.teld.updateRefreshToken()}function IOSTokenTimeout(){var a=document.createElement("iframe");a.id="IOSNotifyFrame",a.src='//jsoc///{"action":"askForToken"}',a.width=0,a.height=0,document.body.appendChild(a)}function sendToken(a,b){"1"==readCookie("teldc")?_createCookie("teldk",a,1296e3):_createCookie("telda",a,1296e3),_createCookie("teldb",b,1296e3)}function askForDeviceInfo(){var a=document.createElement("iframe");a.id="IOSDeviceInfoFrame",a.src='//jsoc///{"action":"askForDeviceInfo"}',a.width=0,a.height=0,document.body.appendChild(a)}function sendDeviceInfo(a){window.deviceInfo=a,document.getElementById("IOSDeviceInfoFrame")&&document.getElementById("IOSDeviceInfoFrame").remove(),_createCookie("DeviceInfoForIframe",window.encodeURIComponent(a),1296e3)}function getIP(){return readCookie("teldz")}function isWeiXin(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function randomNum(a){for(var b="",c=0;c<a;c++)b+=Math.floor(10*Math.random());return b}function getCurDateFormat(){return(new Date).format("yyyy-MM-dd hh:mm:ss")}function _appSgParamSetting(a,b,c){if(-1!=window.navigator.userAgent.indexOf("TeldIosWebView")&&askForDeviceInfo(),-1!=window.navigator.userAgent.indexOf("TeldAndroidWebView")&&(window.deviceInfo=window.teld.askForDeviceInfo()),window.deviceInfo&&""!=window.deviceInfo){var d=window.deviceInfo.split(","),e="1"==readCookie("teldc");a["X-Token"]=readCookie(e?"teldk":"telda"),a.ATS=d[1],a.AVER=d[2],a.ASDI=d[0],a.ARS="APP",a.ACOI=d[4],a.ACOL=d[3],window.BatchID&&c&&(a["Teld-RequestID"]=(new Date).getTime()+""+randomNum(10)),window.deviceInfo=""}}function _webSgParamSetting(a,b,c){setMaxDigits(129);var d=new RSAKeyPair(__c,"",__d),e=getIP(),f=Math.round((new Date).getTime()/1e3),g=GetGlobelData("teldTTT")?GetGlobelData("teldTTT"):0;b&&(g=b-f,SaveGlobelData("teldTTT",g)),f+=new Number(g);var h=encryptedString(d,f+""),i=!readCookie("teldc")||"1"==readCookie("teldc");a["X-Token"]=readCookie(i?"teldk":"telda"),a.WTS=f,a.WVER=h,a.WSDI=e,a.WRS="WEB",a.WCOI="",a.WCOL="",a.ClientTime=getCurDateFormat(),a.DiffentTime=g,window.BatchID&&c&&(a["Teld-RequestID"]=(new Date).getTime()+""+randomNum(10))}function sgParamSetting(a,b,c){if(!isInApp())return _webSgParamSetting(a,b,c);if(getAppVersion()>3)return _appSgParamSetting(a,b,c);var d=readCookie("teldc");d?"1"==d?_webSgParamSetting(a,b,c):_appSgParamSetting(a,b,c):readCookie("telda")||_webSgParamSetting(a,b,c)}function getDevice(){var a=navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)?"wx":/iphone|ipad|ipod/.test(a)?"ios":/android/.test(a)?"android":void 0}function iosJSOC(){var a=document.createElement("iframe");a.src='//JSOC///{"action":"login","params":""}',a.style.display="none",document.body.appendChild(a),a.addEventListener("load",function(){setTimeout(function(){document.body.removeChild(a)},0)})}function getLocationInApp(){-1!=window.navigator.userAgent.indexOf("TeldIosWebView")&&getLocationIOS(),-1!=window.navigator.userAgent.indexOf("TeldAndroidWebView")&&window.teld.getLocation()}function getLocationIOS(){var a=document.createElement("iframe");a.src='http://JSOC///{"action":"getLocation"}',a.style.display="none",document.body.appendChild(a),a.addEventListener("load",function(){setTimeout(function(){document.body.removeChild(a)},0)})}function returnLocation(a,b,c,d){0!=a&&0!=b?window.GDPosition={addressComponent:{city:c},formattedAddress:d,position:{O:Number(b),P:Number(a),lat:Number(a),lng:Number(b)}}:$.toast("\u83b7\u53d6\u5b9a\u4f4d\u5931\u8d25")}function wrpLogout(){_wrpClearSessionCookies(),window.frames.length>0&&window.frames[0].postMessage("gotoLogin","*");var a="?redirect_uri="+encodeURIComponent(window.location.href);window.location.href=window.UserCenterUrl+a}function uploadTrace(a,b,c,d,e){var f=isPC()?$.trim($("#breadcrumbs").find("small").text()):$.trim($("#mobilePageName").text()),g=p_context.SubApplication?p_context.SubApplication:"platform";getDataAsync(window.OmpSGHost+"OMPMonitor-ReportTTrace","post",{traceEntity:JSON.stringify({BatchID:window.BatchID,RequestID:a,TraceType:"WRP",TimeSpan:b,ServiceId:g+"-"+f,InvokeResult:c,BeginTime:d,ServiceId:e})},null,null,null,null,null,!1)}function gotoLoginConfirm(a){1!=wrpLogoutOpend&&(wrpLogoutOpend=!0,window.bootbox?(bootbox.setDefaults("locale","zh_CN"),bootbox.confirm(a,function(a){wrpLogoutOpend=!1,a&&window.wrpLogout()})):$.alert&&$.alert(a,"",function(){wrpLogoutOpend=!1,window.wrpLogout()}))}function getAppVersion(){var a=readCookie("ta_appVersion");return parseInt(a.split(".")[0])}function _commonGetData(a){var b=$.extend({},defalultAjaxParam,a),c=b.isAnonymous;readCookie("teldc")&&"1"==readCookie("teldc")&&(c=!0),readCookie("teldc")||(c=!0),isInApp()&&getAppVersion()<=3&&(readCookie("telda")?(c=!1,_createCookie("teldc","0",1e3),eraseCookie("teldk")):(c=!0,_createCookie("teldc","1",1e3))),c&&(readCookie("teldc")||aLogin(),!readCookie("teldk")&&readCookie("teldc")&&readCookie("teldb")&&"1"==readCookie("teldc")&&refreshToken(!0));var d=randomUrl(b.url),e=(new Date).getTime(),f=(new Date).format("yyyy-MM-dd hh:mm:ss.S"),g=_getQueryString("SID",d),h=b.data?b.data:{};if(b.dataEncrypt){var i=EncryptInterface[b.dataEncrypt];h=i.encode(h)}sgParamSetting(h,null,b.istrace),$.ajax({url:d,type:"post",data:h,timeout:b.timeout,async:b.async,xhrFields:{withCredentials:null==b.withCredentials||b.withCredentials},cache:!1,success:function(a,d,i){if(null==a||""==a)return void(b.sucCallbackFunc&&b.sucCallbackFunc(a,status,i));var j=JSON.parse(i.responseText);if(j.hasOwnProperty("ErrorCode")||j.hasOwnProperty("errcode")&&""!=j.errcode&&null!=j.errcode){var k=j.hasOwnProperty("ErrorCode")?j.ErrorCode:j.errcode,l=j.hasOwnProperty("ErrorInfo")?j.ErrorInfo:j.errmsg;if(isInApp()&&("TTP-SG-1013"==k||"TTP-SG-1011"==k||"TTP-Security-0002"==k||"TTP-SG-2003"==k))return void refreshToken(c);if(isInApp()&&"TTP-SG-1001"==k)return void goToAppLogin();if("TTP-SG-1001"==k)return void _goToLoginPage();if("TTP-SG-1013"==k){if(!window.handleTokenTimeout)return _goToLoginPage();if(0==window.handleTokenTimeout.call(null))return}if("TTP-SG-1011"==k||"TTP-Security-0002"==k)return l&&-1!=l.indexOf("IP\u4e0d\u4e00\u81f4")?isInApp()?goToAppLogin():void gotoLoginConfirm(window.localeMessage.localeMsg.SGIPChange):readCookie("teldb")?(b.tokenRetry++,i.abort(),b.tokenRetry>=3?void gotoLoginConfirm(window.localeMessage.localeMsg.SGRefreshTokenFalse):void(b.errorRetry&&$.when(window.refreshToken(c)).then(function(){_commonGetData(b)}))):_goToLoginPage()}else if(isInApp()&&"stimeout"==a.data)return void goToAppLogin();if(b.sucCallbackFunc){if(b.dataEncrypt){j=EncryptInterface[b.dataEncrypt].decode(j)}b.sucCallbackFunc(j,status,i)}if(window.BatchID){var m=(new Date).getTime()-e;uploadTrace(h["Teld-RequestID"],m,"OK",f,g)}},error:function(a,c,d){if(window.BatchID){var i=(new Date).getTime()-e;uploadTrace(h["Teld-RequestID"],i,"Error",f,g)}var j;try{j=JSON.parse(a.responseText)}catch(c){return void(b.errCallbackFunc&&b.errCallbackFunc(a,status,d))}var k=j.hasOwnProperty("ErrorCode")?j.ErrorCode:j.errcode,l=j.hasOwnProperty("ErrorInfo")?j.ErrorInfo:j.errmsg;if("TTP-SG-2003"==k)return b.unsafeRetry++,a.abort(),b.unsafeRetry>=3?void gotoLoginConfirm(window.localeMessage.localeMsg.SGUnlawfulRequest):void(b.errorRetry&&(sgParamSetting(h,new Number(l.split(":")[1]),b.istrace),_commonGetData(b)));if(ExceptionReport(this.url,this.data,a.responseText,k),b.errCallbackFunc&&b.errCallbackFunc(a,status,d),0==b.showError);else{var m=j.ErrorInfo;p_context.isPlatformIndex?m=window.localeMessage.localeMsg.hasOwnProperty(k)?window.localeMessage.localeMsg[k]:j.ErrorInfo:window.localeMessage.hasOwnProperty(p_context.SubApplication)&&(m=window.localeMessage[p_context.SubApplication].hasOwnProperty(k)?window.localeMessage[p_context.SubApplication][k]:j.ErrorInfo),NotifyErrorInfo(m)}}})}function queryDataAsync(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!0,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!0})}function queryDataSync(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!1,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!0})}function getDataAsync(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!0,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!1})}function getDataSync(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!1,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!1})}function queryDataAsyncAes(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!0,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!0,dataEncrypt:"AES"})}function queryDataSyncAes(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!1,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!0,dataEncrypt:"AES"})}function getDataAsyncAes(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!0,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!1,dataEncrypt:"AES"})}function getDataSyncAes(a,b,c,d,e,f,g,h,i,j){return _commonGetData({async:!1,url:a,type:b,data:c,sucCallbackFunc:d,errCallbackFunc:e,scope:f,withCredentials:g,showError:h,istrace:i,timeout:j,isAnonymous:!1,dataEncrypt:"AES"})}function _createCookie(a,b,c){var d,e;c?(d=new Date,d.setTime(d.getTime()+1e3*c),e="; expires="+d.toGMTString()):e="";var f,g=document.domain.split(".");1==g.length?document.cookie=a+"="+b+e+"; path=/":(f=function(a){var b=a.split(":")[0].split(".");return b.shift(),b.unshift(""),b.join(".")}(document.domain),document.cookie=a+"="+b+e+"; path=/;domain="+f)}function aLogin(){return _refreshToken(JSON.stringify({DeviceType:"WEB",ReqSource:100,ClientIP:getIP()}),window.aLoginUrl,"loginInfo",!0)}function refreshToken(a){if(isInApp()){if(getAppVersion()>3)return _refreshAppToken();if("0"==readCookie("teldc"))return _refreshAppToken()}var b=readCookie("teldb");if(!b){if(!a)return _goToLoginPage();if(aLogin(),!readCookie("teldb"))return}var c=b.split(".").reverse().join(".");return _refreshToken(JSON.stringify({DeviceType:"WEB",ReqSource:100,RefreshToken:c,ClientIP:getIP()}),a?window.ATokenRefreshUrl:window.newTokenRefreshUrl,"refreshToken",a)}function _refreshAppToken(){return-1!=window.navigator.userAgent.indexOf("TeldIosWebView")?void IOSTokenTimeout():-1!=window.navigator.userAgent.indexOf("TeldAndroidWebView")?void AndroidTokenTimeout():void 0}function _refreshToken(a,b,c,d){var e=$.Deferred(),f=Math.round((new Date).getTime()/1e3)+"",g=cajess(f).substring(0,16),h=cajess(a,f+"000000",g),i={};return i[c]=JSON.stringify({Data:h,UTS:f,UVER:g,UUID:(new Date).getTime()+""+randomNum(10)}),sgParamSetting(i),$.ajax({url:b,type:"POST",timeout:1e4,data:i,dataType:"json",cache:!1,async:!1}).done(function(a,b,f){if(a&&"1"==a.state){var g=window.dcajess(a.data),h=window.dcajess(g.Data,g.UTS+"000000",g.UVER);1==h.TokenType?(_createCookie("teldk",h.AccessToken,h.ExpiresIn),"loginInfo"==c?_createCookie("teldz",h.ClientIP,6e4):_createCookie("teldz",readCookie("teldz"),6e4)):(_createCookie("telda",h.AccessToken,h.ExpiresIn),_createCookie("teldz",readCookie("teldz"),6e4)),_createCookie("teldb",h.RefreshToken,6e4),_createCookie("teldc",h.TokenType,6e4),e.resolve()}else if(e.reject(),window.handleTokenTimeout){var i=window.handleTokenTimeout.call(null);if(0==i)return}else d||_goToLoginPage()}).fail(function(a,b,c){if(window.handleTokenTimeout){if(0==window.handleTokenTimeout.call(null))return}else d||_goToLoginPage()}),e.promise()}function IsLogin(){return!!readCookie("telda")||!(readCookie("telda")||!readCookie("teldb"))&&(refreshToken(),!!readCookie("telda"))}function getWrpUserInfo(){var a=$.Deferred(),b=window.setInterval(function(){window.WrpUserInfo&&""!=window.WrpUserInfo.Mobile&&(window.clearInterval(b),a.resolve(window.WrpUserInfo))},200);return a.promise()}function PVCount(a,b){var c={async:!0,url:FrameSGHost+"WRPFrame-PageAccessCount",type:"post",data:a,sucCallbackFunc:function(a){b&&b.call(null)},isAnonymous:!0,errorRetry:!1},d=readCookie("teldc");d&&"1"!=d?getWrpUserInfo().then(function(b){var d=JSON.parse(a.filter);d.Ext5=b.DepartmentId,c.data={filter:JSON.stringify(d)},_commonGetData(c)}):_commonGetData(c)}function ExceptionReport(a,b,c,d){var e={exception:JSON.stringify({ModuleName:"WRP",WebUrl:a,AppVersion:"",Context:b,ExpInfo:encodeURIComponent(c),ExpCode:d,ExpLevel:"",ExpStack:"",ExpType:"\u8bbf\u95eeSG\u5f02\u5e38"})},f={async:!0,url:FrameSGHost+"WRPFrame-ExceptionLog",type:"post",data:e,isAnonymous:!0,errorRetry:!1};return console.error(c),_commonGetData(f)}function setPageName(a){var b='<small><i class="fa fa-angle-right"></i>'+a+"</small>";$("#breadcrumbs").find("small").remove(),$("#breadcrumbs").append(b)}function saveCondition(a,b){a.$store.commit("updCondition",b)}function getOldCondition(a){return a.$store.state.condition}function toBlank(a){return a||""}function getApplicationId(a){var b=window.FrameApplicationInfo;return b&&b.hasOwnProperty(a)?b[a]:-1}function getCurDomainUrl(){var a=$("#CurDomainUrl").val();return a||(a=""),a}function getPerformanceNow(){return window.performance?window.performance.now():(new Date).getTime()}function copyObject2Object(a,b){for(var c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b[e]=a[e]}}function storageTest(a){if(!a)return!1;try{return a.setItem("key","value"),a.removeItem("key"),!0}catch(a){return!1}}function SaveGlobelData(a,b){storageTest(window.sessionStorage)?window.sessionStorage.setItem(a,b):_createCookie(a,b)}function GetGlobelData(a){return storageTest(window.sessionStorage)?window.sessionStorage.getItem(a):readCookie(a)}function RemoveGlobelData(a){storageTest(window.sessionStorage)?window.sessionStorage.removeItem(a):eraseCookie(a)}function getMenuCookieKey(){return window.p_context?window.p_context.SubApplication+location.host.split(".")[0]+"curMenuId":null}function getMobileMenuCookieKey(){return location.host.split(".")[0]+"curMobileMenuId"}function getMenuGroupCookieKey(){return window.p_context?window.p_context.SubApplication+location.host.split(".")[0]+"menuGroupId":null}function resetSelectedMenu(){if(isPC()&&!hasNoAuth()){var a=getMenuId()?getMenuId():readCookie(getMenuCookieKey()),b=window.groupId;if(!a&&!b)return void window.isMenuGroup;if(a&&!b&&window.isMenuGroup,a&&b&&window.isMenuGroup&&($("#pcmenu").find("li").each(function(){$(this).removeClass("active")}),$("#"+b).parent().addClass("active"),$("#"+b).closest(".more-group-li").length>0&&$("#"+b).closest(".more-group-li").addClass("active")),0==window.MenuType){$("#"+a).addClass("active").parent().css("display","block").closest("li").addClass("open");var c=$("#"+a).find("span").eq(0).text();setPageName(c)}else{$("#"+a).addClass("active"),$("#"+a).closest(".menu-floor-1").addClass("active");var c=$("#"+a).find("span").eq(0).text();setPageName(c)}}}function saveCurrentData(a){$(".v-change").each(function(){if(!this.name||$(this).is(":disabled")||!rsubmittable.test(this.nodeName))return!0;var b;b=rcheckableType.test(this.type)?""+$(this).prop("checked"):$(this).val(),SaveGlobelData([a,changeDataKeyPrefix,this.name].join(""),b)})}function getChangeData(a){var b={},c=[];if($(".v-change").each(function(){if(!this.name||$(this).is(":disabled")||!rsubmittable.test(this.nodeName))return!0;var d;d=rcheckableType.test(this.type)?""+$(this).prop("checked"):$(this).val();var e=[a,changeDataKeyPrefix,this.name].join("");GetGlobelData(e)!=d&&(b[this.name]=d),c.push(e)}),0==Object.keys(b).length)return null;$(".v-change-key").each(function(){b[this.name]=$(this).val()});for(var d=0;d<c.length;d++)RemoveGlobelData(c[d]);return b}function GetPageControls(a){var b="";return $(a).find("input,select,textarea").each(function(a){var c=$(this).attr("id"),d=$(this).val();switch($(this).attr("type")){case"checkbox":$(this).is(":checked")?b+='"'+c+'":"1",':b+='"'+c+'":"0",';break;default:b+='"'+c+'":"'+$.trim(d)+'",'}}),b=b.substr(0,b.length-1),jQuery.parseJSON("{"+b+"}")}function GetPageRadio(a){var b="";return $(a).find("input,select,textarea").each(function(a){var c=$(this).attr("id"),d=$(this).val();switch($(this).attr("type")){case"checkbox":$(this).attr("checked")?b+='"'+c+'":"1",':b+='"'+c+'":"0",';break;case"radio":var e=$(this).attr("name");d=$("input[name="+e+"]:checked").val(),b+='"'+e+'":"'+$.trim(d)+'",';break;default:""==d&&(d=""),b+='"'+c+'":"'+$.trim(d)+'",'}}),b=b.substr(0,b.length-1),jQuery.parseJSON("{"+b+"}")}function SetPageControls(a){for(var b in a){var c=$("[id="+b+"]"),d=$.trim(a[b]).replace("&nbsp;","");switch(c.attr("type")){case"checkbox":1==d?c.attr("checked","checked"):c.removeAttr("checked");break;default:c.val(d)}}}function lrtrim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function setClipboardData(a){if(window.clipboardData)window.clipboardData.setData("text",a);else{var b=document.getElementById("clipboardText");if(!b){$("<input type='text' id='clipboardText' style='position: absolute;top: -10000px;' value=''>").appendTo($(document.body)),b=document.getElementById("clipboardText")}b.value=a,b.focus(),b.select();try{document.execCommand("copy",!1,null)}catch(a){}}}function isPC(){var a=navigator.userAgent,b=a.match(/(Android);?[\s\/]+([\d.]+)?/),c=a.match(/(iPad).*OS\s([\d_]+)/),d=a.match(/(iPod)(.*OS\s([\d_]+))?/),e=!c&&a.match(/(iPhone\sOS)\s([\d_]+)/);return(document.documentElement.clientWidth||document.body.clientWidth)>1024&&!b&&!c&&!d&&!e}function getQueryString(a,b){var c=new RegExp("mid=([^&]*)","i"),d=(b||window.location.href).match(c);return null!=d?d[1]:null}function _getQueryString(a,b){var c=new RegExp(a+"=([^&]*)","i"),d=(b||window.location.href).match(c);return null!=d?d[1]:null}function getMenuId(a){return getQueryString("mid",a)}function rememberMid(a){if(-1==a.split("?")[0].indexOf("Frame/Index")){var b=getMenuId(a);b&&createCookie(getMenuCookieKey(),b)}}function removeMid(){}function getFirstErrElement(){return $("input.has-error").first()}function showLoading(){$("#innerLoading").removeClass("loading-inactive")}function hideLoading(){$("#innerLoading").addClass("loading-inactive")}function _zip(a,b,c){var d=document.createElement("canvas"),e=d.getContext("2d"),f=new Image;f.src=a,f.onload=function(){var a=this,g=a.width,h=a.height,i=g/h;g=b.width||g,h=b.height||g/i;var j=.7;d.width=g,d.height=h,e.drawImage(a,0,0),b.quality&&b.quality<=1&&b.quality>0&&(j=b.quality);var k=d.toDataURL("image/jpeg",j);c(k),d=null,f=null}}function zipImage(a,b,c){var d=new FileReader;d.onloadend=function(a){_zip(a.target.result,b,c),d=null},d.readAsDataURL(a)}function hasFavorited(a){var b=window.webFrameFavorate;if(!b)return!1;var c=getMenuId(a),d=window.location.href,e=!1;for(var f in b){var g=b[f];if(c&&""!=c){if(g.MENUID==c){e=!0;break}}else if(-1!=d.indexOf(g.APPLICATION+g.NAVIGATEURL)){e=!0;break}}return e}function hasNoAuth(){return-1!=window.location.href.indexOf("NoAuth")}function GetDateTime(){isInApp()||(RemoveGlobelData("teldTTT"),getDataAsync(FrameSGHost+"WRPFrame-GetDateTime","get",null,function(a){if(a){SaveGlobelData("teldTTT",parseInt(a.split("").reverse().join(""))-Math.round((new Date).getTime()/1e3))}}))}function autoRefreshToken(a){window.setInterval(function(){window.refreshToken("0"!=readCookie("teldc"))},6e4)}function IsOnline(){return _navigatorIsOnline}function wrpGetCity(){function a(a){_createCookie("TeldGeolocation",JSON.stringify(a),7200),window.GDPosition=a}function b(a){console.log(a.message)}if(window.AMap&&-1==window.location.href.indexOf("NoAuth=true"))if(readCookie("TeldGeolocation"))try{window.GDPosition=JSON.parse(readCookie("TeldGeolocation"))}catch(a){}else{var c=new AMap.Map("iCenter");c.plugin("AMap.Geolocation",function(){geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),c.addControl(geolocation),geolocation.getCurrentPosition(),AMap.event.addListener(geolocation,"complete",a),AMap.event.addListener(geolocation,"error",b)})}}function sendHeart(a){window.FrameSGHost&&(window.heartWorker=new Worker("/plugin/teld-heart-work.js"),window.setInterval(function(){var a=readCookie("teldc");if(a&&"1"!=a){var b=$.trim($("#breadcrumbs").find("small").text()),c=isPC()?"PC":"Mobile",d=getBrowerType(),e={};getWrpUserInfo().then(function(a){sgParamSetting(e,null,!1),heartWorker.postMessage([window.GDPosition,window.p_context,b,c,window.FrameSGHost,d,$.param(e),a.DepartmentId])})}else;},6e4))}function getBrowerType(){return function(){var a=navigator.userAgent.toLowerCase(),b=null;return(s=a.match(/msie ([\d.]+)/))?(b="IE",s[1]&&(b+=parseInt(s[1]))):b=(s=a.match(/firefox\/([\d.]+)/))?"firefox":-1!=a.indexOf("rv:11")?"IE11":-1!=a.indexOf("edge")?"Edge":(s=a.match(/chrome\/([\d.]+)/))?"Chrome":(s=a.match(/opera.([\d.]+)/))?"Opera":(s=a.match(/version\/([\d.]+).*safari/))?"Safari":-1!=a.indexOf("micromessenger")?"\u5fae\u4fe1":-1!=a.indexOf("dingtalk")?"\u9489\u9489":"\u5176\u4ed6",b}()}function getSgSetUrlByLocation(){var a=$.Deferred();if(window.SGSetLocation)return a.resolve(window.SGSetLocation),a.promise();var b=window.setInterval(function(){if(window.GDPosition){window.clearInterval(b);var c=window.GDPosition.addressComponent.adcode.substring(0,4);getDataAsync(window.SgSetApiUrl+c,"get",{},function(b){return 0==b.state?(NotifyError(b.errmsg),void a.reject(b.errmsg)):b.data&&""!=b.data?(window.SGSetLocation="//"+b.data,void a.resolve(window.SGSetLocation)):void a.reject(b.errmsg)},null,null,!1)}},200);return a.promise()}function getI18nValByKey(a){if(!p_context||!a||""==a)return"";try{return p_context.isPlatformIndex?window.localeMessage.localeMsg[a]:window.localeMessage[p_context.SubApplication][a]}catch(a){return""}}window.__c="010001",window.__d="C2D84A72668932EBE5CC2BADB5DE288E59AD587775C1E45F33F6CC9DAB376C793AFF12050C0648D5C3016F685B9F4FA2460A59B6B07793808B4E68A883CA2830FD7895C66F68F64A829DB99DEDE978EC2E04711184A872C1F43956B1B72CFA803C1D677BAE386209368B3F3ED7A8CB06BEC64B0D0369EE62A49E6B417FC55959",Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};var _toString=Object.prototype.toString;window.tokenRefreshRetry=0,window.commited=!1;var changeDataKeyPrefix="_vc_",rsubmittable=/^(?:input|select|textarea|keygen)/i,rcheckableType=/^(?:checkbox|radio)$/i,cachedScrollbarWidth;window.addEventListener("message",function(a){if("gotoLogin"==a.data)return eraseCookie("TELDSID"),eraseCookie("telda"),eraseCookie("teldb"),eraseCookie("TELDSID"),void window.location.reload()}),Date.now||(Date.now=function(){return(new Date).getTime()}),window.pendingRequests={},window.ajaxPrefilter=!1,window.jQuery&&$.ajaxPrefilter(function(a,b,c){if(window.ajaxPrefilter){var d=a.url;/&r=0.[0-9]+$/.test(d)&&(d=d.split("&r=")[0]),pendingRequests[d]?c.abort():pendingRequests[d]=c;var e=a.complete;a.complete=function(a,b){delete pendingRequests[d],jQuery.isFunction(e)&&e.apply(this,arguments)}}}),window.Zepto&&($.ajaxSettings.beforeSend=function(a,b){if(window.ajaxPrefilter){var c=b.url;/&r=0.[0-9]+$/.test(c)&&(c=c.split("&r=")[0]),pendingRequests[c]?a.abort():pendingRequests[c]=a;var d=b.complete;b.complete=function(a,b){delete pendingRequests[c],Zepto.isFunction(d)&&d.apply(this,arguments)}}});var goToAppLogin=function(){if(_wrpClearSessionCookies(),"android"==getDevice())window.teld.goToLogin();else{iosJSOC('http://JSOC///{"action":"login","params":""}')}},defalultAjaxParam={async:!0,url:null,type:"post",data:null,sucCallbackFunc:null,errCallbackFunc:null,scope:null,withCredentials:!0,showError:!0,istrace:!0,tokenRetry:0,unsafeRetry:0,timeout:12e4,isAnonymous:!1,dataEncrypt:null,errorRetry:!0},tokenRefreshing=!1,wrpLogoutOpend=!1;$(document).on("keydown",function(a){var b=a.target;if(8==a.which){if("text"==b.type||"textarea"==b.type||"password"==b.type||"search"==b.type||"tel"==b.type||"number"==b.type)return!0;if(b.readOnly&&1!=b.readOnly)return!0;if("DIV"==b.tagName&&"true"==b.getAttribute("contenteditable"))return!0;a.which=0,a.returnValue=!1}return!0}),$.smartScroll=function(a,b){if(b&&!a.data("isBindScroll")){var c={posY:0,maxscroll:0};a.on({touchstart:function(a){var d=a.touches[0]||a,e=$(a.target);if(e.length){var f;e.is(b)?f=e:0==(f=e.parents(b)).length&&(f=null),f&&(c.elScroll=f,c.posY=d.pageY,c.scrollY=f.scrollTop(),c.maxscroll=f[0].scrollHeight-f[0].clientHeight)}},touchmove:function(){c.maxscroll<=0&&event.preventDefault();var a=c.elScroll,b=a.scrollTop(),d=event.touches[0]||event,e=d.pageY-c.posY;return e>0&&0==b?void event.preventDefault():e<0&&b+1>=c.maxscroll?void event.preventDefault():void 0},touchend:function(){c.maxscroll=0}}),a.data("isBindScroll",!0)}};var _navigatorIsOnline=navigator.onLine;window.addEventListener("online",function(){_navigatorIsOnline=!0},!1),window.addEventListener("offline",function(){_navigatorIsOnline=!1},!1),$(function(){if(0==isInApp()&&wrpGetCity(),0==isInApp()){GetDateTime();var a=window.setInterval(function(){window.GDPosition&&(sendHeart(),window.clearInterval(a))},1e3)}var b=window.setInterval(function(){readCookie("teldc")&&(autoRefreshToken(),window.clearInterval(b))},1e3)});